{"version":3,"file":"mini-vue.cjs.js","sources":["../src/shared/index.ts","../src/reactivity/effect.ts","../src/reactivity/baseHandlers.ts","../src/reactivity/reactive.ts","../src/runtime-core/componentEmit.ts","../src/runtime-core/componentProps.ts","../src/runtime-core/componentPublicInstance.ts","../src/shared/shapeFlags.ts","../src/runtime-core/componentSlots.ts","../src/runtime-core/component.ts","../src/runtime-core/vnode.ts","../src/runtime-core/renderer.ts","../src/runtime-core/createApp.ts","../src/runtime-core/h.ts","../src/runtime-core/helpers/renderSlots.ts"],"sourcesContent":["export const extend = Object.assign;\n\nexport const isObject = (val) => {\n  return val !== null && typeof val === \"object\";\n};\n\nexport const hasChanged = (val, newVal) => {\n  return !Object.is(val, newVal);\n};\n\nexport const hasOwn = (target, key) => {\n  return Object.prototype.hasOwnProperty.call(target, key);\n};\n\nfunction capitalize(str: string) {\n  return str ? str[0].toUpperCase() + str.slice(1) : \"\";\n}\n\nexport function toHandlerName(str: string) {\n  return str ? \"on\" + capitalize(str) : \"\";\n}\n\nexport function camelize(str: string) {\n  return str.replace(/-(\\w)/g, (_, c: string) => {\n    return c ? c.toUpperCase() : \"\";\n  });\n}\n","import { extend } from \"../shared\";\n\nlet activeEffect;\nlet shouldTrack;\n\nexport class ReactiveEffect {\n  private _fn: any;\n  deps = [];\n  stopActive = true;\n  onStop?: () => void;\n  public scheduler: Function | undefined;\n  constructor(fn, scheduler?: Function) {\n    this._fn = fn;\n    this.scheduler = scheduler;\n  }\n\n  run() {\n    if (!this.stopActive) {\n      return this._fn();\n    }\n\n    // should be collected\n    shouldTrack = true;\n    activeEffect = this;\n    const r = this._fn();\n\n    // reset\n    shouldTrack = false;\n\n    return r;\n  }\n\n  stop() {\n    if (this.stopActive) {\n      cleanEffect(this);\n      if (this.onStop) {\n        this.onStop();\n      }\n      this.stopActive = false;\n    }\n  }\n}\n\nfunction cleanEffect(effect) {\n  effect.deps.forEach((dep: any) => {\n    dep.delete(effect);\n  });\n  effect.deps.length = 0;\n}\n\nexport function isTracking() {\n  // activeEffect might have a value of `undefined` (scheduler)\n  // !shouldTrack || !activeEffect\n  return shouldTrack && activeEffect !== undefined;\n}\n\n// collect dependents\nconst targetMap = new Map();\nexport function track(target, key) {\n  if (!isTracking()) return;\n\n  // target-depsMap --> key-dep ---> {functions}s\n  let depsMap = targetMap.get(target);\n  if (!depsMap) {\n    depsMap = new Map();\n    targetMap.set(target, depsMap);\n  }\n\n  let dep = depsMap.get(key);\n  if (!dep) {\n    dep = new Set();\n    depsMap.set(key, dep);\n  }\n\n  trackEffects(dep);\n}\n\nexport function trackEffects(dep) {\n  if (dep.has(activeEffect)) return;\n  // A `dep` can have multiple `activeEffect`s,\n  // and a `activeEffect` can be associated with multiple `dep`s.\n  dep.add(activeEffect);\n  activeEffect.deps.push(dep);\n}\n\n// trigger dependents\nexport function trigger(target, key) {\n  let depsMap = targetMap.get(target);\n  let dep = depsMap.get(key);\n  triggerEffects(dep);\n}\n\nexport function triggerEffects(dep) {\n  for (const effect of dep) {\n    if (effect.scheduler) {\n      effect.scheduler();\n    } else {\n      effect.run();\n    }\n  }\n}\n\nexport function effect(fn, options: any = {}) {\n  const _effect = new ReactiveEffect(fn, options.scheduler);\n  // extend options\n  extend(_effect, options);\n\n  _effect.run();\n\n  const runner: any = _effect.run.bind(_effect);\n  runner.effect = _effect;\n\n  return runner;\n}\n\nexport function stop(runner) {\n  runner.effect.stop();\n}\n","import { extend, isObject } from \"../shared\";\nimport { track, trigger } from \"./effect\";\nimport { ReactiveFlags, reactive, readonly } from \"./reactive\";\n\n// Performance Optimization:\n// In order to avoid repetitive calls to the `createGetter` function,\n// use an object to store previously created getter.\nlet get = createGetter();\nlet set = createSetter();\nlet readonlyGet = createGetter(true);\nlet shallowReadonlyGet = createGetter(true, true);\n\n// higher-order function\nfunction createGetter(isReadonly = false, shallow = false) {\n  return function get(target, key) {\n    if (key === ReactiveFlags.IS_REACTIVE) {\n      return !isReadonly;\n    } else if (key === ReactiveFlags.IS_READONLY) {\n      return isReadonly;\n    }\n\n    const res = Reflect.get(target, key);\n\n    if (shallow) {\n      return res;\n    }\n\n    // nested obj\n    if (isObject(res)) {\n      return isReadonly ? readonly(res) : reactive(res);\n    }\n\n    if (!isReadonly) {\n      track(target, key);\n    }\n    return res;\n  };\n}\n\nfunction createSetter() {\n  return function set(target, key, value) {\n    const res = Reflect.set(target, key, value);\n    trigger(target, key);\n    return res;\n  };\n}\n\nexport const mutableHandlers = {\n  get,\n  set,\n};\n\nexport const readonlyHandlers = {\n  get: readonlyGet,\n  set(target, key, value) {\n    console.warn(\n      `key: ${String(\n        key\n      )} cannot be modified because the target is a read-only object.`,\n      target\n    );\n    return true;\n  },\n};\n\nexport const shallowReadonlyHandlers = extend({}, readonlyHandlers, {\n  get: shallowReadonlyGet,\n});\n","import {\n  mutableHandlers,\n  readonlyHandlers,\n  shallowReadonlyHandlers,\n} from \"./baseHandlers\";\n\n// Using functions to encapsulate certain operations can enhance the readability of the codes.\nfunction createActiveObject(raw, baseHandlers) {\n  return new Proxy(raw, baseHandlers);\n}\n\nexport const enum ReactiveFlags {\n  IS_REACTIVE = \"__v_isReactive\",\n  IS_READONLY = \"__v_isReadonly\",\n}\n\nexport function isReactive(value) {\n  // trigger one `get` operation\n  return !!value[ReactiveFlags.IS_REACTIVE];\n}\n\nexport function isReadonly(value) {\n  // trigger one `get` operation\n  return !!value[ReactiveFlags.IS_READONLY];\n}\n\nexport function isProxy(value) {\n  return isReactive(value) || isReadonly(value);\n}\n\nexport function reactive(raw) {\n  return createActiveObject(raw, mutableHandlers);\n}\n\nexport function readonly(raw) {\n  return createActiveObject(raw, readonlyHandlers);\n}\n\nexport function shallowReadonly(raw) {\n  return createActiveObject(raw, shallowReadonlyHandlers);\n}\n","import { camelize, toHandlerName } from \"../shared\";\n\nexport function emit(instance, event, ...args) {\n  console.log(\"event =>\", event);\n\n  const { props } = instance.vnode;\n\n  const handler = props[toHandlerName(camelize(event))];\n\n  handler && handler(...args);\n}\n","export function initProps(instance, rawProps) {\n  instance.props = rawProps || {};\n}\n","import { hasOwn } from \"../shared\";\n\nconst publicPropertiesMap = {\n  $el: (i) => i.vnode.el,\n  $slots: (i) => i.slots,\n};\n\nexport const PublicInstanceProxyHandlers = {\n  get({ _: instance }, key) {\n    const { setupState, props } = instance;\n\n    if (hasOwn(setupState, key)) {\n      return setupState[key];\n    } else if (hasOwn(props, key)) {\n      return props[key];\n    }\n\n    const publicGetter = publicPropertiesMap[key];\n    if (publicGetter) {\n      return publicGetter(instance);\n    }\n  },\n};\n","// prettier-ignore\nexport enum ShapeFlags {\n  ELEMENT = 1,                 // 00001\n  STATEFUL_COMPONENT = 1 << 1, // 00010\n  TEXT_CHILDREN = 1 << 2,      // 00100\n  ARRAY_CHILDREN = 1 << 3,     // 01000\n  SLOT_CHILDREN = 1 << 4,      // 10000\n}\n","import { ShapeFlags } from \"../shared/shapeFlags\";\n\nexport function initSlots(instance, children) {\n  console.log(\"children =>\", children);\n\n  const { vnode } = instance;\n\n  if (vnode.shapeFlag & ShapeFlags.SLOT_CHILDREN) {\n    console.log(\"handle slot\");\n    normalizeSlotObject(children, instance.slots);\n  }\n}\n\nfunction normalizeSlotObject(children, slots) {\n  for (let key in children) {\n    const value = children[key];\n    console.log(\"value =>\", value);\n\n    slots[key] = (props) => normalizeSlotValue(value(props));\n  }\n}\n\nfunction normalizeSlotValue(value) {\n  return Array.isArray(value) ? value : [value];\n}\n","import { shallowReadonly } from \"../reactivity/reactive\";\nimport { emit } from \"./componentEmit\";\nimport { initProps } from \"./componentProps\";\nimport { PublicInstanceProxyHandlers } from \"./componentPublicInstance\";\nimport { initSlots } from \"./componentSlots\";\n\nexport function createComponentInstance(vnode) {\n  const component = {\n    vnode,\n    type: vnode.type,\n    setupState: {},\n    props: {},\n    slots: {},\n    emit: () => {},\n  };\n\n  component.emit = emit.bind(null, component) as any;\n\n  return component;\n}\n\nexport function setupComponent(instance) {\n  initProps(instance, instance.vnode.props);\n  initSlots(instance, instance.vnode.children);\n\n  setupStatefulComponent(instance);\n}\n\nexport function getCurrentInstance() {\n  return currentInstance;\n}\n\nlet currentInstance = null;\nfunction setCurrentInstance(instance) {\n  currentInstance = instance;\n}\n\nfunction setupStatefulComponent(instance: any) {\n  console.log(\"instance =>\", instance);\n  const Component = instance.type;\n  console.log(\"Component =>\", Component);\n\n  // context\n  instance.proxy = new Proxy({ _: instance }, PublicInstanceProxyHandlers);\n\n  const { setup } = Component;\n\n  if (setup) {\n    setCurrentInstance(instance);\n    const setupResult = setup(shallowReadonly(instance.props), {\n      emit: instance.emit,\n    });\n    setCurrentInstance(null);\n\n    handleSetupResult(instance, setupResult);\n  }\n}\n\nfunction handleSetupResult(instance, setupResult: any) {\n  // function Object\n  // object\n  if (typeof setupResult === \"object\") {\n    instance.setupState = setupResult;\n  }\n\n  finishComponentSetup(instance);\n\n  // TODO function\n}\n\nfunction finishComponentSetup(instance: any) {\n  const Component = instance.type;\n  instance.render = Component.render;\n}\n","import { isObject } from \"../shared\";\nimport { ShapeFlags } from \"../shared/shapeFlags\";\n\nexport const Fragment = Symbol(\"Fragment\");\nexport const Text = Symbol(\"Text\");\n\nexport function createVNode(type, props?, children?) {\n  const vnode = {\n    type,\n    props,\n    shapeFlag: getShapeFlag(type),\n    children,\n  };\n\n  // children\n  if (typeof vnode.children === \"string\") {\n    vnode.shapeFlag |= ShapeFlags.TEXT_CHILDREN;\n  } else if (Array.isArray(children)) {\n    vnode.shapeFlag |= ShapeFlags.ARRAY_CHILDREN;\n  }\n\n  // slots children\n  if (vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT && isObject(children)) {\n    vnode.shapeFlag |= ShapeFlags.SLOT_CHILDREN;\n  }\n\n  return vnode;\n}\n\nexport function createTextVnode(children) {\n  console.log(\"Text VNode children =>\", children);\n  return createVNode(Text, {}, children);\n}\n\nfunction getShapeFlag(type) {\n  return typeof type === \"string\"\n    ? ShapeFlags.ELEMENT\n    : ShapeFlags.STATEFUL_COMPONENT;\n}\n","import { createComponentInstance, setupComponent } from \"./component\";\nimport { Fragment, Text } from \"./vnode\";\nimport { ShapeFlags } from \"../shared/shapeFlags\";\n\nexport function render(vnode, container) {\n  patch(vnode, container);\n}\n\nfunction patch(vnode, container) {\n  console.log(\"vnode =>\", vnode);\n  const { type, shapeFlag } = vnode;\n\n  switch (type) {\n    // Fragment: only renders its children\n    case Fragment:\n      processFragment(vnode, container);\n      break;\n    case Text:\n      processTextVNode(vnode, container);\n      break;\n    default:\n      if (shapeFlag & ShapeFlags.ELEMENT) {\n        processElement(vnode, container);\n      } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\n        processComponent(vnode, container);\n      }\n      break;\n  }\n}\n\nfunction processTextVNode(vnode: any, container: any) {\n  const { children } = vnode;\n  const el = (vnode.el = document.createTextNode(children));\n  container.append(el);\n}\n\nfunction processFragment(vnode: any, container: any) {\n  mountChildren(vnode.children, container);\n}\n\nfunction processElement(vnode: any, container: any) {\n  // init\n  mountElement(vnode, container);\n  // TODO update\n}\n\nfunction processComponent(vnode: any, container: any) {\n  mountComponent(vnode, container);\n}\n\nfunction mountComponent(vnode: any, container) {\n  const instance = createComponentInstance(vnode);\n  setupComponent(instance);\n  setupRenderEffect(instance, vnode, container);\n}\n\nfunction mountElement(initialVNode: any, container: any) {\n  const { props, children } = initialVNode;\n\n  // type\n  const el = (initialVNode.el = document.createElement(initialVNode.type));\n\n  // props\n  for (const key in props) {\n    const val = props[key];\n    const isOn = /^on[A-Z]/.test(key);\n\n    if (isOn) {\n      const event = key.slice(2).toLowerCase();\n      el.addEventListener(event, val);\n    } else {\n      el.setAttribute(key, val);\n    }\n  }\n\n  const { shapeFlag } = initialVNode;\n  // children\n  if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n    el.textContent = children;\n  } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n    mountChildren(children, el);\n  }\n\n  container.append(el);\n}\n\nfunction setupRenderEffect(instance: any, initialVNode, container) {\n  const { proxy } = instance;\n  const subTree = instance.render.call(proxy);\n\n  patch(subTree, container);\n\n  initialVNode.el = subTree.el;\n}\n\nfunction mountChildren(children, container) {\n  children.forEach((v) => {\n    patch(v, container);\n  });\n}\n","import { render } from \"./renderer\";\nimport { createVNode } from \"./vnode\";\n\nexport function createApp(rootComponent) {\n  return {\n    mount(rootContainer) {\n      const vnode = createVNode(rootComponent);\n      render(vnode, rootContainer);\n    },\n  };\n}\n","import { createVNode } from \"./vnode\";\n\nexport function h(type, props?, children?) {\n  return createVNode(type, props, children);\n}\n","import { createVNode, Fragment } from \"../vnode\";\n\nexport function renderSlots(slots, name, props) {\n  console.log(\"slot props =>\", props);\n\n  const slot = slots[name];\n  console.log(\"slot =>\", slot);\n\n  if (slot && typeof slot === \"function\") {\n    console.log(\"slot(props) =>\", slot(props));\n\n    return createVNode(Fragment, {}, slot(props));\n  }\n}\n"],"names":[],"mappings":"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"}